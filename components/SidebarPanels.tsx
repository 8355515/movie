'use client'; import React, { useEffect, useState } from 'react'; import Link from 'next/link'; export default function SidebarPanels(){ const [favs,setFavs]=useState<any[]>([]); const [hist,setHist]=useState<any[]>([]); useEffect(()=>{ async function f(){ const r1=await fetch('/api/favorites'); setFavs(await r1.json()); const r2=await fetch('/api/history'); setHist(await r2.json()); } f(); },[]); return (<div className="p-4 space-y-4"> <div><h2 className="font-bold text-lg mb-2">收藏</h2> <ul>{favs.map((it,i)=>(<li key={i}><Link href={`/watch/${it.id}`}>{it.title}</Link></li>))}</ul></div> <div><h2 className="font-bold text-lg mb-2">历史</h2><ul>{hist.map((it,i)=>(<li key={i}><Link href={`/watch/${it.id}`}>{it.title} - {it.progress}%</Link></li>))}</ul></div></div>) }